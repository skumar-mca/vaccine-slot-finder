(this["webpackJsonpvaccine-slot-finder"]=this["webpackJsonpvaccine-slot-finder"]||[]).push([[0],{157:function(e,t,c){"use strict";c.r(t);var n=c(5),i=c.n(n),a=c(22),s=c.n(a),r=(c(74),c(75),c(8)),l=function(e,t){localStorage.setItem(e,JSON.stringify(t))},o=function(e,t){var c=localStorage.getItem(e);return c?JSON.parse(c):t||null},d=c(10),b=c(16),j=c(26),u=c.n(j),m=c(67),p=c.n(m),h=(c(94),c(95),c(1));var v=function(e){var t,c=null,i=6e4,a=[{value:i,label:"1 Minute"},{value:12e4,label:"2 Minutes"},{value:9e5,label:"15 Minutes"},{value:18e5,label:"30 Minutes"}],s="AUTO_REFRESH_INTERVAL",j="EMAIL_ID",m="AUTO_REFRESH_FLAG",v="SEARCH_CONDITIONS",O="STATES",f=Object(n.useState)([]),x=Object(r.a)(f,2),g=x[0],_=x[1],S=Object(n.useState)(function(){var e=o(v,[]);return e.length>0?e.map((function(e,t){return{id:t,districtList:e.districtList,state:e.state,state_name:e.state_name,district:e.district,district_name:e.district_name,availableSlots:[]}})):[{id:0,districtList:[],state:"",district:""}]}()),y=Object(r.a)(S,2),N=y[0],k=y[1],C=Object(n.useState)(new Date),w=Object(r.a)(C,2),I=w[0],L=w[1],A=Object(n.useState)(!0),D=Object(r.a)(A,2),z=D[0],E=D[1],G=Object(n.useState)(""),F=Object(r.a)(G,2),T=F[0],R=F[1],K=Object(n.useState)(i),M=Object(r.a)(K,2),J=M[0],V=M[1],H=function(e,t){var c=e.target.value;!function(e,t){var c="DISTRICTS_".concat(e),n=o(c,[]);n.length>0?t(n):u.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/districts/"+e).then((function(e){if(e&&e.data){var n=e.data.districts;l(c,n),t(n)}}))}(c,(function(e){var n=N.findIndex((function(e){return e.id===t.id}));if(n>-1){N[n].state=c;var i=g.find((function(e){return e.state_id==c}));i&&(N[n].state_name=i.state_name),N[n].districtList=e}k(Object(b.a)(N)),q(N)}))},q=function(e){var t=[];e&&(t=e.map((function(e){return{id:e.id,state:e.state,state_name:e.state_name,district:e.district,district_name:e.district_name,districtList:e.districtList,availableSlots:e.availableSlots}}))),l(v,t)},B=function(){var e=o(v,[]);e.length>0&&e.map((function(e){var t="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=".concat(e.district,"&date=").concat(function(e){var t=e.getDate(),c=e.getMonth()+1;return(t<=9?"0"+t:t)+"-"+(c<=9?"0"+c:c)+"-"+e.getFullYear()}(new Date(I)));u.a.get(t).then((function(t){t&&t.data&&U(e,t.data.centers)}))}))},U=function(e,t){var c=[];t.length>0&&t.map((function(e){var t=[];(e.sessions||[]).map((function(e){(e.available_capacity>0||e.available_capacity_dose1>0||e.available_capacity_dose2>0)&&t.push(e)})),t.length>1&&c.push({center:e,sessions:t})}));var n=N.findIndex((function(t){return t.id===e.id}));n>-1&&(N[n].availableSlots=c,k(Object(b.a)(N)),q(N)),c.length>0&&P(c)},P=function(e){if(T){var t="";e&&e.map((function(e){e.sessions.map((function(c){t="".concat(t,"-------------------------------------------------------------------------------------------\n            Fee Type: ").concat(e.center.fee_type,", \n            Fees: ").concat(e.center.vaccine_fees?"".concat(e.center.vaccine_fees[0].fee," (").concat(e.center.vaccine_fees[0].vaccine,")"):"0",",\n            Vaccine: ").concat(c.vaccine,",\n            Age Limit: ").concat(c.min_age_limit,",\n            Avl Capacity: ").concat(c.available_capacity,",\n            Dose 1: ").concat(c.available_capacity_dose1,",\n            Dose 2: ").concat(c.available_capacity_dose2,",\n            Date: ").concat(c.date,",\n            Address: ").concat(e.center.name,", ").concat(e.center.address,"\n        ")}))}));var c={service_id:"service_d7elxlo",template_id:"template_91dx2y5",user_id:"user_OpcKVh9JRegJpoIecK0rs",template_params:{to_email:T,from_name:"Sunil Kumar",message:t}};u.a.post("https://api.emailjs.com/api/v1.0/email/send",c).then((function(){})).catch((function(e){}))}},X=function(){if(5!==N.length){var e=[].concat(Object(b.a)(N),[{id:N.length,districtList:[],state:"",district:"",availableSlots:[]}]);k(Object(b.a)(e)),q(e)}},Y=function(){Q(),c=window.setInterval((function(){if(!z)return!1;B()}),J)},Q=function(){c&&window.clearInterval(c)};return Object(n.useEffect)((function(){return function(){var e=o(O,[]);e.length>0?_(e):u.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(e){if(e&&e.data){var t=e.data.states;l(O,t),_(e.data.states)}}))}(),function(){var e=o(j,"");e&&R(e);var t=o(m,!1);E(t);var c=o(s,i);c&&V(c)}(),Y(),function(){Q()}}),[]),Object(n.useEffect)((function(){}),[N]),Object(h.jsxs)("div",{className:"header-section",children:[Object(h.jsxs)("div",{className:"row form-row",children:[(N||[]).map((function(e,t){var c;return Object(h.jsxs)("div",{className:"col-md-4 col-sm-6",children:[Object(h.jsxs)("h5",{children:["Location ",t+1,N.length>1&&Object(h.jsx)("button",{className:"btn text-danger btn-sm btn-del-location",title:"Delete location",onClick:function(){!function(e){if(1!==N.length){var t=N.findIndex((function(t){return t.id===e.id}));t>-1&&N.splice(t,1),k(Object(b.a)(N)),q(N)}}(e)},children:"X"}),t===N.length-1&&Object(h.jsx)("button",{className:"btn btn-info btn-sm btn-add-location",onClick:X,children:"+ Add Location"})]}),Object(h.jsxs)("div",{class:"input-group input-group-sm mb-3",children:[Object(h.jsx)("span",{class:"input-group-text",id:"inputGroup-sizing-sm-s-".concat(e.id),children:"State"}),Object(h.jsxs)("select",{class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm-s-".concat(e.id),value:e.state,onChange:function(t){H(t,e)},children:[Object(h.jsx)("option",{children:"Select State"}),g.map((function(e){return Object(h.jsx)("option",{value:e.state_id,children:e.state_name})}))]})]}),Object(h.jsxs)("div",{class:"input-group input-group-sm mb-3",children:[Object(h.jsx)("span",{class:"input-group-text",id:"inputGroup-sizing-sm-d-".concat(e.id),children:"District"}),Object(h.jsxs)("select",(c={class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm-d-".concat(e.id)},Object(d.a)(c,"aria-label",".district-select-sm example"),Object(d.a)(c,"value",e.district),Object(d.a)(c,"onChange",(function(t){!function(e,t){var c=e.target.value,n=N.findIndex((function(e){return e.id===t.id}));if(n>-1){N[n].district=c;var i=N[n].districtList.find((function(e){return e.district_id==c}));i&&(N[n].district_name=i.district_name)}k(Object(b.a)(N)),q(N)}(t,e)})),Object(d.a)(c,"children",[Object(h.jsx)("option",{children:"Select District"}),e.districtList&&e.districtList.map((function(e){return Object(h.jsx)("option",{value:e.district_id,children:e.district_name})}))]),c))]})]},e.id)})),Object(h.jsxs)("div",{className:"col-md-4 col-sm-6",children:[Object(h.jsxs)("div",{class:"input-group input-group-sm mb-3",children:[Object(h.jsx)("span",{class:"input-group-text",id:"inputGroup-sizing-sm-dt",children:"Date"}),Object(h.jsx)("div",(t={class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm-dt"},Object(d.a)(t,"aria-label",".district-select-sm example"),Object(d.a)(t,"children",Object(h.jsx)(p.a,{selected:I,onChange:function(e){return L(e)},dateFormat:"dd-MM-yyyy"})),t))]}),Object(h.jsxs)("div",{class:"input-group input-group-sm mb-3",children:[Object(h.jsx)("span",{class:"input-group-text",id:"inputGroup-sizing-sm-s-email",children:"Notify on email"}),Object(h.jsx)("input",{class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm-email",placeholder:"example@gmail.com",value:T,onChange:function(e){var t=e.target.value;l(j,t),R(t)}})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-6 col-sm-12",children:Object(h.jsxs)("div",{class:"form-check",children:[Object(h.jsx)("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked",checked:z,onChange:function(e){var t=e.target.checked;l(m,t),E(t),t&&Y()}}),Object(h.jsx)("label",{class:"form-check-label",for:"flexCheckChecked",children:"Auto Refresh"})]})}),Object(h.jsx)("div",{className:"col-md-6 col-sm-12",children:Object(h.jsxs)("div",{class:"input-group input-group-sm mb-3",children:[Object(h.jsx)("span",{class:"input-group-text",id:"inputGroup-sizing-sm-s-interval",children:"Interval"}),Object(h.jsxs)("select",{class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm-interval",value:J,onChange:function(e){var t=e.target.value;l(s,t),V(t),Y()},children:[Object(h.jsx)("option",{children:"Select Interval"}),a.map((function(e){return Object(h.jsx)("option",{value:e.value,children:e.label})}))]})]})})]})]}),Object(h.jsx)("div",{className:"col-md-2 col-sm-6",children:Object(h.jsx)("button",{className:"btn btn-sm btn-primary btn-block",onClick:B,children:"Search"})})]}),Object(h.jsx)("div",{className:"row d-md-block d-lg-block d-sm-none d-xs-none d-none",children:(N||[]).map((function(e){var t=0;return Object(h.jsxs)("div",{className:"col-md-12 slot-result-wrapper",children:[Object(h.jsxs)("h4",{children:[e.state_name," (",e.district_name,")"]}),Object(h.jsxs)("table",{className:"table table-dark table-striped table-sm table-hover table-slot-result",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Fee Type"}),Object(h.jsx)("th",{children:"Fees"}),Object(h.jsx)("th",{children:"Vaccine"}),Object(h.jsx)("th",{children:"Age Limit"}),Object(h.jsx)("th",{children:"Avl Capacity"}),Object(h.jsx)("th",{children:"Avl Dose 1"}),Object(h.jsx)("th",{children:"Avl Dose 2"}),Object(h.jsx)("th",{children:"Date"}),Object(h.jsx)("th",{children:"Address"})]})}),Object(h.jsxs)("tbody",{children:[0===(e.availableSlots||[]).length&&Object(h.jsx)("tr",{children:Object(h.jsx)("td",{colSpan:"10",className:"no-record",children:"No slots found!"})}),(e.availableSlots||[]).map((function(e){return(e.sessions||[]).map((function(c,n){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:++t}),Object(h.jsx)("td",{children:e.center.fee_type}),Object(h.jsx)("td",{children:e.center.vaccine_fees?"".concat(e.center.vaccine_fees[0].fee," (").concat(e.center.vaccine_fees[0].vaccine,")"):"0"}),Object(h.jsx)("td",{children:c.vaccine}),Object(h.jsx)("td",{children:c.min_age_limit}),Object(h.jsx)("td",{children:c.available_capacity}),Object(h.jsx)("td",{children:c.available_capacity_dose1}),Object(h.jsx)("td",{children:c.available_capacity_dose2}),Object(h.jsx)("td",{children:c.date}),Object(h.jsxs)("td",{children:[e.center.name,", ",e.center.address]})]})}))}))]})]})]})}))}),Object(h.jsx)("div",{className:"row d-lg-none d-md-none d-sm-block d-xs-block",children:(N||[]).map((function(e){return Object(h.jsxs)("div",{className:"col-md-12 slot-result-wrapper",children:[Object(h.jsxs)("h4",{children:[e.state_name," (",e.district_name,")"]}),0===(e.availableSlots||[]).length&&Object(h.jsx)("div",{className:"no-record",children:"No slots found!"}),Object(h.jsx)("div",{class:"list-group",children:(e.availableSlots||[]).map((function(e){return(e.sessions||[]).map((function(t,c){return Object(h.jsxs)("a",{href:"javascript:void(0)",class:"list-group-item list-group-item-action","aria-current":"true",children:[Object(h.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(h.jsxs)("h5",{class:"mb-1",children:["Age Limit: ",t.min_age_limit,", Rs. ",e.center.vaccine_fees?"".concat(e.center.vaccine_fees[0].fee," (").concat(e.center.vaccine_fees[0].vaccine,")"):"0"]}),Object(h.jsx)("small",{children:Object(h.jsx)("span",{class:"badge bg-primary",children:e.center.fee_type})})]}),Object(h.jsxs)("p",{class:"mb-1",children:["Available Capacity: ",t.available_capacity,","," ",Object(h.jsx)("b",{children:"Dose 1"}),": ",t.available_capacity_dose1,","," ",Object(h.jsx)("b",{children:"Dose 2"}),": ",t.available_capacity_dose2,","]}),Object(h.jsxs)("small",{children:["Vaccine: ",t.vaccine,", Date: ",t.date]}),Object(h.jsx)("p",{children:Object(h.jsxs)("small",{children:[e.center.name,", ",e.center.address]})})]})}))}))})]})}))})]})},O=c(48);var f=function(e){var t=e.onHandleSubmit,c=Object(n.useState)(!1),i=Object(r.a)(c,2),a=i[0],s=i[1],l=Object(n.useState)({secretCode:null,secretKey:null}),o=Object(r.a)(l,2),b=o[0],j=o[1],u=function(e){var t=e.target,c=t.id,n=t.value;j((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(d.a)({},c,n))}))};return Object(h.jsxs)("div",{className:"login-wrapper",children:[Object(h.jsxs)("div",{class:"mb-3",children:[Object(h.jsx)("label",{for:"secretCode",class:"form-label",children:"Code"}),Object(h.jsx)("input",{type:"password",class:"form-control",id:"secretCode",placeholder:"Enter code",onChange:u})]}),Object(h.jsxs)("div",{class:"mb-3",children:[Object(h.jsx)("label",{for:"secretKey",class:"form-label",children:"Secret Key"}),Object(h.jsx)("input",{type:"password",class:"form-control",id:"secretKey",placeholder:"Enter secret key",onChange:u})]}),a&&Object(h.jsx)("div",{className:"text-danger",children:"Invalid code and key. Please try with valid credentials. "}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"button",class:"btn btn-primary btn-block",disabled:!b.secretCode||!b.secretKey,onClick:function(){s(!1);var e=b.secretCode,c=b.secretKey;if(!e||!c)return!1;"I4096"===c&&"4096"===e?t&&t(!0):s(!0)},children:"Submit"})]})};var x=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),c=t[0],i=t[1];return Object(n.useEffect)((function(){var e=o("ISLG",!1);i(e)}),[]),Object(n.useEffect)((function(){}),[c]),Object(h.jsx)("div",{className:"row row-home",children:Object(h.jsx)("div",{className:"col-md-12",children:c?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("figure",{class:"text-center fig-app",children:[Object(h.jsxs)("blockquote",{class:"blockquote",children:[Object(h.jsx)("p",{children:"Vaccine Slot Finder."}),Object(h.jsx)("button",{className:"btn btn-sm btn-danger btn-logout",onClick:function(){var e;e="ISLG",localStorage.removeItem(e),window.location.reload()},children:"Log Out"})]}),Object(h.jsx)("figcaption",{class:"blockquote-footer",children:Object(h.jsx)("cite",{title:"Source Title",children:"Find slots at multiple locations together"})})]}),Object(h.jsx)(v,{})]}):Object(h.jsx)(f,{onHandleSubmit:function(e){i(e),l("ISLG",e)}})})})};var g=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(x,{})})};s.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root"))},74:function(e,t,c){},75:function(e,t,c){},95:function(e,t,c){}},[[157,1,2]]]);
//# sourceMappingURL=main.f2608e30.chunk.js.map